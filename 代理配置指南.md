# 🔧 代理配置指南

## 📋 配置步骤

### 步骤1: 编辑 .env 文件

打开项目根目录下的 `.env` 文件，添加代理配置：

```bash
# 如果代理不需要认证
HTTPS_PROXY=http://proxy.example.com:8080

# 或者如果代理需要用户名和密码
HTTPS_PROXY=http://username:password@proxy.example.com:8080
```

### 步骤2: 配置说明

**代理地址格式**：
- `http://代理地址:端口`
- `http://用户名:密码@代理地址:端口`（如果需要认证）

**常见代理类型**：

1. **HTTP代理**：
   ```
   HTTPS_PROXY=http://127.0.0.1:7890
   ```

2. **SOCKS5代理**（需要转换为HTTP代理）：
   ```
   HTTPS_PROXY=http://127.0.0.1:1080
   ```

3. **带认证的代理**：
   ```
   HTTPS_PROXY=http://user:pass@proxy.example.com:8080
   ```

### 步骤3: 重启服务器

配置完成后，重启服务器：

```bash
# 停止当前服务器（Ctrl+C）
# 然后重新启动
npm start
```

启动时，如果代理配置成功，你会看到：
```
✅ 代理已配置: http://***@proxy.example.com:8080
```

## 🔍 常见代理配置示例

### 示例1: 本地HTTP代理（如Clash、V2Ray等）

```env
HTTPS_PROXY=http://127.0.0.1:7890
```

### 示例2: 本地SOCKS5代理

```env
HTTPS_PROXY=http://127.0.0.1:1080
```

### 示例3: 远程代理服务器

```env
HTTPS_PROXY=http://proxy.example.com:8080
```

### 示例4: 带认证的代理

```env
HTTPS_PROXY=http://myuser:mypassword@proxy.example.com:8080
```

## ✅ 验证代理配置

### 方法1: 查看启动日志

启动服务器后，查看日志中是否有：
```
✅ 代理已配置: http://***@...
```

### 方法2: 测试AI功能

1. 访问 http://localhost:3000
2. 点击任意AI工具（如TikTok标题生成器）
3. 填写表单并生成
4. 如果成功生成内容，说明代理配置成功

### 方法3: 检查错误信息

如果代理配置错误，会看到：
- 连接超时错误
- 代理认证失败错误
- 无法连接到代理服务器错误

## ⚠️ 常见问题

### Q1: 如何找到我的代理地址和端口？

**Clash**:
- 默认HTTP代理端口：7890
- 配置：`HTTPS_PROXY=http://127.0.0.1:7890`

**V2Ray**:
- 查看V2Ray配置中的HTTP端口
- 通常为：10808 或 10809

**其他代理软件**:
- 查看代理软件的设置/配置页面
- 找到HTTP代理端口

### Q2: 代理需要用户名密码怎么办？

在代理地址中包含用户名和密码：
```
HTTPS_PROXY=http://username:password@proxy.example.com:8080
```

### Q3: 如何测试代理是否可用？

在终端运行：
```bash
curl -x http://your-proxy:port https://www.google.com
```

如果能返回内容，说明代理可用。

### Q4: 配置后仍然无法连接？

1. **检查代理地址和端口是否正确**
2. **确认代理服务正在运行**
3. **检查防火墙是否阻止了连接**
4. **尝试使用HTTP_PROXY而不是HTTPS_PROXY**

## 📝 完整配置示例

`.env` 文件示例：

```env
# Server Configuration
PORT=3000
NODE_ENV=development

# AI Provider
AI_PROVIDER=google
GOOGLE_API_KEY=AIzaSyCbb54UXn-upfvq33UlavlZO18u1LhMxSM

# Proxy Configuration
HTTPS_PROXY=http://127.0.0.1:7890
```

## 🎯 下一步

1. ✅ 配置代理到 `.env` 文件
2. ✅ 重启服务器
3. ✅ 测试AI工具功能
4. ✅ 确认可以正常生成内容

---

**配置完成后，AI功能应该可以正常使用了！** 🎉
